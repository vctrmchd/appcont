<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestão de Clientes - Sorria/Medic</title>
  
  <!-- Materialize CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <style>
    body {
      display: flex;
      min-height: 100vh;
      flex-direction: column;
      background-color: #f5f5f5;
    }
    main {
      flex: 1 0 auto;
    }
    .nav-wrapper {
      padding-left: 20px;
      padding-right: 20px;
    }
    .container {
      margin-top: 30px;
    }
    .card {
      border-radius: 8px;
    }
    .card-title {
      font-weight: 500 !important;
    }
    .btn-floating {
      margin-right: 10px;
    }
    .section-title {
      font-size: 1.8rem;
      font-weight: 400;
      margin-bottom: 20px;
      color: #424242;
    }
    .stat-card {
      padding: 20px;
      text-align: center;
    }
    .stat-number {
      font-size: 2.5rem;
      font-weight: 300;
      color: #1976d2;
    }
    .stat-label {
      font-size: 1rem;
      color: #757575;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .hidden {
      display: none !important;
    }
    .cliente-row {
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .cliente-row:hover {
      background-color: #e3f2fd;
    }
    .btn-small {
      margin: 2px;
    }
    .collection-item {
      padding: 10px 20px !important;
    }
    .modal {
      max-height: 90%;
      max-width: 900px;
    }
    .modal .modal-content {
      padding: 24px;
    }
    .input-field {
      margin-bottom: 20px;
    }
    .row {
      margin-bottom: 10px;
    }
    .badge {
      border-radius: 12px;
    }
    .dropdown-content li > a {
      color: #424242 !important;
      display: flex !important;
      align-items: center;
    }
    .dropdown-content li > a > i {
      margin-right: 10px;
      color: #757575;
    }
    .dropdown-content li:hover {
      background-color: #f5f5f5;
    }
    #viewClienteModal {
      max-width: 1200px;
      width: 95%;
      max-height: 95%;
    }
    #viewClienteModal .modal-content {
      padding: 30px;
      max-height: calc(95vh - 100px);
      overflow-y: auto;
    }
    .info-section {
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .info-section h6 {
      color: #1976d2;
      font-weight: 500;
      margin-bottom: 20px;
      font-size: 18px;
      border-bottom: 2px solid #1976d2;
      padding-bottom: 10px;
    }
    .info-row {
      display: flex;
      margin-bottom: 15px;
      align-items: flex-start;
    }
    .info-label {
      font-weight: 600;
      color: #424242;
      min-width: 200px;
      display: flex;
      align-items: center;
    }
    .info-label i {
      margin-right: 8px;
      font-size: 18px;
      color: #757575;
    }
    .info-value {
      color: #616161;
      flex: 1;
    }
    .status-badge {
      display: inline-block;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .status-ok {
      background: #4caf50;
      color: white;
    }
    .status-pendente {
      background: #ff9800;
      color: white;
    }
    .status-irregular {
      background: #f44336;
      color: white;
    }
    .status-ativo {
      background: #4caf50;
      color: white;
    }
    .status-inativo {
      background: #ff9800;
      color: white;
    }
    .status-baixada {
      background: #f44336;
      color: white;
    }
    .obs-box {
      background: #f5f5f5;
      border-left: 4px solid #2196f3;
      padding: 15px;
      border-radius: 4px;
      margin-top: 10px;
    }
    .alert-box {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      border-radius: 4px;
      margin-top: 10px;
    }
    #clienteModal {
      max-width: 1200px;
      width: 95%;
      max-height: 95%;
    }
    #clienteModal .modal-content {
      padding: 30px;
      max-height: calc(95vh - 100px);
      overflow-y: auto;
    }
    .form-section {
      background: #fff;
      border-radius: 8px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      border-left: 4px solid #1976d2;
    }
    .form-section h6 {
      color: #1976d2;
      font-weight: 500;
      margin: 0 0 20px 0;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .form-section h6 i {
      font-size: 24px;
    }
    .form-header {
      background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
      color: white;
      padding: 25px 30px;
      margin: -30px -30px 30px -30px;
      border-radius: 8px 8px 0 0;
    }
    .form-header h4 {
      margin: 0;
      font-weight: 500;
      font-size: 28px;
    }
    
    /* Notificações */
    .notification-badge {
      position: relative;
      display: inline-block;
    }

    .notification-count {
      position: absolute;
      top: 10px;
      right: 0px;
      background: #f44336;
      color: white;
      border-radius: 50%;
      font-size: 13px;
      font-weight: bold;
      min-width: 20px;
      height: 20px;
      width: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
    } 
    .notification-badge .notification-count {
      position: absolute;
      top: 10px;
      right: 0px;
      background: #f44336;
      color: white;
      border-radius: 50%;
      font-size: 12px; /* Reduzir um pouco pode ajudar no alinhamento */
      font-weight: bold;
      width: 20px;   /* Largura fixa */
      height: 20px;  /* Altura fixa */
      
      /* Centralização com Flexbox (garantido pela especificidade) */
      display: flex;
      align-items: center;
      justify-content: center;
      
      /* Remove espaçamentos que podem atrapalhar */
      padding: 0;
      line-height: 1; 
    }
    .notification-header a {
      color: white !important; 
      font-size: 12px;
      text-decoration: underline;
    }

    .notification-item {
      padding: 15px 20px;
      border-bottom: 1px solid #e0e0e0;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .notification-item:hover {
      background-color: #f5f5f5;
    }
    .notification-item.unread {
      background-color: #e3f2fd;
    }
    .notification-item .notification-title {
      font-weight: 600;
      color: #424242;
      margin-bottom: 5px;
    }
    .notification-item .notification-message {
      color: #757575;
      font-size: 14px;
      margin-bottom: 5px;
    }
    .notification-item .notification-time {
      color: #9e9e9e;
      font-size: 12px;
    }
    .notification-icon {
      display: inline-block;
      margin-right: 10px;
      vertical-align: middle;
    }
    .notification-icon.warning {
      color: #ff9800;
    }
    .notification-icon.danger {
      color: #f44336;
    }
    .notification-icon.info {
      color: #2196f3;
    }
    #notificationsDropdown {
      max-width: 400px;
      max-height: 500px;
      overflow-y: auto;
    }
    .notification-header {
      padding: 15px 20px;
      background: #1976D2;
      font-weight: 500;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: default;
    }
    
    #notificationsDropdown .notification-header span {
  color: white;
    }

    #notificationsDropdown .notification-header a {
      color: white;
      text-decoration: underline;
    }

    #notificationsDropdown .notification-header a:hover {
      color: #eeeeee;
    }

    .notification-header span {
      color: white; 
    }

    .notification-header:hover {
      background: #1976D2 !important;
    }
    .notification-empty {
      padding: 40px 20px;
      text-align: center;
      color: #9e9e9e;
    }
    
    /* Histórico de Alterações */
    .timeline {
      position: relative;
      padding: 20px 0;
    }
    .timeline-item {
      position: relative;
      padding-left: 50px;
      padding-bottom: 30px;
    }
    .timeline-item:last-child {
      padding-bottom: 0;
    }
    .timeline-item::before {
      content: '';
      position: absolute;
      left: 15px;
      top: 0;
      bottom: -30px;
      width: 2px;
      background: #e0e0e0;
    }
    .timeline-item:last-child::before {
      display: none;
    }
    .timeline-icon {
      position: absolute;
      left: 0;
      top: 0;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #1976d2;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      z-index: 1;
    }
    .timeline-icon.create {
      background: #4caf50;
    }
    .timeline-icon.edit {
      background: #2196f3;
    }
    .timeline-icon.delete {
      background: #f44336;
    }
    .timeline-content {
      background: white;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .timeline-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .timeline-title {
      font-weight: 600;
      color: #424242;
    }
    .timeline-time {
      color: #9e9e9e;
      font-size: 12px;
    }
    .timeline-user {
      color: #757575;
      font-size: 14px;
      margin-bottom: 10px;
    }
    .timeline-changes {
      background: #f5f5f5;
      border-left: 3px solid #1976d2;
      padding: 10px;
      border-radius: 4px;
      font-size: 14px;
    }
    .timeline-change-item {
      margin-bottom: 5px;
    }
    .timeline-change-item:last-child {
      margin-bottom: 0;
    }
    .timeline-change-label {
      font-weight: 600;
      color: #424242;
    }
    .timeline-change-old {
      color: #f44336;
      text-decoration: line-through;
    }
    .timeline-change-new {
      color: #4caf50;
      font-weight: 500;
    }
    #historicoModal {
      max-width: 900px;
      width: 90%;
    }
    #historicoModal .modal-content {
      max-height: calc(90vh - 100px);
      overflow-y: auto;
    }
    
    /* Comentários */
    .comentarios-section {
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .comentarios-section h6 {
      color: #1976d2;
      font-weight: 500;
      margin-bottom: 20px;
      font-size: 18px;
      border-bottom: 2px solid #1976d2;
      padding-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .comentario-form {
      background: #f5f5f5;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
    }
    .comentario-form textarea {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      padding: 12px;
      width: 100%;
      min-height: 80px;
      font-family: inherit;
      font-size: 14px;
      resize: vertical;
      margin-bottom: 10px;
    }
    .comentario-form textarea:focus {
      outline: none;
      border-color: #1976d2;
      box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.1);
    }
    .comentarios-lista {
      max-height: 400px;
      overflow-y: auto;
    }
    .comentario-item {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      position: relative;
      transition: box-shadow 0.2s;
    }
    .comentario-item:hover {
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .comentario-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }
    .comentario-autor {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .comentario-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #1976d2, #1565c0);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 16px;
    }
    .comentario-autor-info {
      display: flex;
      flex-direction: column;
    }
    .comentario-nome {
      font-weight: 600;
      color: #424242;
      font-size: 14px;
    }
    .comentario-email {
      font-size: 12px;
      color: #757575;
    }
    .comentario-data {
      font-size: 12px;
      color: #9e9e9e;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .comentario-editado {
      font-size: 11px;
      color: #9e9e9e;
      font-style: italic;
      margin-left: 5px;
    }
    .comentario-texto {
      color: #616161;
      line-height: 1.6;
      white-space: pre-wrap;
      word-wrap: break-word;
      margin-top: 10px;
      padding: 10px;
      background: #fafafa;
      border-radius: 4px;
      border-left: 3px solid #1976d2;
    }
    .comentario-acoes {
      position: absolute;
      top: 15px;
      right: 15px;
      display: none;
    }
    .comentario-item:hover .comentario-acoes {
      display: flex;
      gap: 5px;
    }
    .comentario-btn {
      background: none;
      border: none;
      cursor: pointer;
      padding: 5px;
      border-radius: 4px;
      transition: background 0.2s;
      color: #757575;
    }
    .comentario-btn:hover {
      background: #e0e0e0;
    }
    .comentario-btn i {
      font-size: 18px;
    }
    .comentario-btn.delete:hover {
      background: #ffebee;
      color: #f44336;
    }
    .comentario-btn.edit:hover {
      background: #e3f2fd;
      color: #1976d2;
    }
    .comentarios-vazio {
      text-align: center;
      padding: 40px 20px;
      color: #9e9e9e;
    }
    .comentarios-vazio i {
      font-size: 48px;
      margin-bottom: 10px;
      opacity: 0.5;
    }
    .badge-comentarios {
      background: #ff9800;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 10px;
    }

    /* Parcelamentos */
    .parcelamentos-section {
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .parcelamentos-section h6 {
      color: #1976d2;
      font-weight: 500;
      margin-bottom: 20px;
      font-size: 18px;
      border-bottom: 2px solid #1976d2;
      padding-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .parcelamento-item {
      background: white;
      border: 1px solid #e0e0e0;
      border-left: 4px solid #ff9800;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      position: relative;
      transition: box-shadow 0.2s;
    }

    .parcelamento-item:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .parcelamento-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .parcelamento-tipo {
      font-weight: 600;
      color: #424242;
      font-size: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .parcelamento-tipo i {
      color: #ff9800;
    }

    .parcelamento-status {
      background: #e3f2fd;
      color: #1976d2;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }

    .parcelamento-detalhes {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 10px;
      margin-bottom: 10px;
    }

    .parcelamento-detail-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: #616161;
    }

    .parcelamento-detail-item i {
      font-size: 18px;
      color: #757575;
    }

    .parcelamento-observacoes {
      background: #f5f5f5;
      border-left: 3px solid #ff9800;
      padding: 10px;
      border-radius: 4px;
      margin-top: 10px;
      font-size: 14px;
      color: #616161;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .parcelamento-acoes {
      position: absolute;
      top: 15px;
      right: 15px;
      display: none;
      gap: 5px;
    }

    .parcelamento-item:hover .parcelamento-acoes {
      display: flex;
    }

    .parcelamento-btn {
      background: none;
      border: none;
      cursor: pointer;
      padding: 5px;
      border-radius: 4px;
      transition: background 0.2s;
      color: #757575;
    }

    .parcelamento-btn:hover {
      background: #e0e0e0;
    }

    .parcelamento-btn i {
      font-size: 18px;
    }

    .parcelamento-btn.delete:hover {
      background: #ffebee;
      color: #f44336;
    }

    .parcelamento-btn.edit:hover {
      background: #e3f2fd;
      color: #1976d2;
    }

    .parcelamentos-vazio {
      text-align: center;
      padding: 40px 20px;
      color: #9e9e9e;
    }

    .parcelamentos-vazio i {
      font-size: 48px;
      margin-bottom: 10px;
      opacity: 0.5;
    }

    .badge-parcelamentos {
      background: #ff9800;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 10px;
    }

    .alert-vencimento {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 12px;
      border-radius: 4px;
      margin-top: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .alert-vencimento.urgente {
      background: #ffebee;
      border-left-color: #f44336;
    }

    .alert-vencimento i {
      color: #ff9800;
    }

    .alert-vencimento.urgente i {
      color: #f44336;
    }

    /* Badges de Empresa */
    .badge-empresa {
      display: inline-block;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: white;
    }

    .badge-sorria {
      background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
      box-shadow: 0 2px 4px rgba(25, 118, 210, 0.3);
    }

    .badge-medic {
      background: linear-gradient(135deg, #028a0f 0%, #026b0c 100%);
      box-shadow: 0 2px 4px rgba(2, 138, 15, 0.3);
    }

    .badge-felicio {
      background: linear-gradient(135deg, #757575 0%, #616161 100%);
      box-shadow: 0 2px 4px rgba(117, 117, 117, 0.3);
    }

    .badge-default {
      background: linear-gradient(135deg, #9e9e9e 0%, #757575 100%);
      box-shadow: 0 2px 4px rgba(158, 158, 158, 0.3);
    }

    .badge-empresa:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      transition: all 0.2s ease;
    }

    /* Estilos para tela de login */
    #loginSection {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #loginSection .card {
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      border-radius: 12px;
    }

    #loginSection .material-icons.large {
      font-size: 80px;
      margin-bottom: 10px;
    }

    #loginSection .card-title {
      margin: 10px 0;
      font-weight: 500;
    }

    /* Ocultar navbar quando estiver na tela de login */
    body.login-mode nav,
    body.login-mode footer {
      display: none;
    }

    


  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="blue darken-1">
    <div class="nav-wrapper">
      <div class="row" style="margin-bottom: 0;">
        <!-- Logo à esquerda -->
        <div class="col s3">
          <a href="#!" class="brand-logo">
            <i class="material-icons left">business</i>
            Gestão Contábil
          </a>
        </div>
        
        <!-- Menu centralizado -->
        <div class="col s6 center-align">
          <ul class="hide-on-med-and-down" style="display: inline-flex; list-style: none; margin: 0;">
            <li><a href="#!" onclick="showDashboard()"><i class="material-icons left">dashboard</i>Dashboard</a></li>
            <li><a href="#!" onclick="showClientes()"><i class="material-icons left">people</i>Clientes</a></li>
            <li><a href="#!" onclick="showUsuarios()"><i class="material-icons left">person</i>Usuários</a></li>
            <li><a href="#!" onclick="showAuditoria()"><i class="material-icons left">history</i>Auditoria</a></li>
          </ul>
        </div>
        
        <!-- Ícones à direita -->
        <div class="col s3">
          <ul class="right">
            <li>
              <a class="dropdown-trigger notification-badge" href="#!" data-target="notificationsDropdown">
                <i class="material-icons">notifications</i>
                <span id="notificationCount" class="notification-count" style="display: none;">0</span>
              </a>
            </li>
            <li>
              <a class="dropdown-trigger" href="#!" data-target="userDropdown">
                <i class="material-icons left">account_circle</i>
                <span id="userName">Usuário</span>
                <i class="material-icons right">arrow_drop_down</i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>
  
  <!-- Dropdown de Usuário -->
  <ul id="userDropdown" class="dropdown-content">
    <li><a href="#!" onclick="abrirMeuPerfil()"><i class="material-icons">person</i>Meu Perfil</a></li>
    <li><a href="#!" onclick="abrirConfiguracoes()"><i class="material-icons">settings</i>Configurações</a></li>
    <li class="divider"></li>
    <li><a href="#!" onclick="fazerLogout()"><i class="material-icons">exit_to_app</i>Sair</a></li>
  </ul>

  <!-- Dropdown de Notificações -->
  <ul id="notificationsDropdown" class="dropdown-content">
    <li class="notification-header">
      <span>Notificações</span>
      <a href="#!" onclick="marcarTodasLidas()" style="color: white; font-size: 12px; text-decoration: underline;">Marcar todas como lidas</a>
    </li>
    <li><div id="notificationsList"></div></li>
  </ul>

  <main>

  <!-- ========================================
  SEÇÃO DE LOGIN
  ======================================== -->
  <div id="loginSection" style="margin-top: 60px; padding: 0 20px; max-width: 100%;">
    <div class="row">
      <div class="col s12 m12 l12 xl10 offset-xl1">
        <div class="card" style="border-radius: 16px; overflow: hidden; max-width: 1200px; margin: 0 auto;">
          <div class="card-content" style="padding: 60px 80px;">
            <div class="row" style="margin-bottom: 0;">
              <!-- Coluna da Esquerda - Branding -->
              <div class="col s12 m5 center-align" style="padding-right: 40px; border-right: 1px solid #e0e0e0;">
                <div style="background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%); width: 120px; height: 120px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-bottom: 25px; box-shadow: 0 6px 16px rgba(25, 118, 210, 0.4);">
                  <i class="material-icons" style="font-size: 64px; color: white;">business</i>
                </div>
                <h4 class="card-title" style="margin: 20px 0 15px 0; font-weight: 500; font-size: 26px; line-height: 1.3;">Sistema de Gestão Contábil</h4>
                <p class="grey-text" style="font-size: 16px; margin-bottom: 30px;">Sorria / Medic / Felício</p>
              </div>
              
              <!-- Coluna da Direita - Formulário -->
              <div class="col s12 m7" style="padding-left: 40px;">
                <h5 style="margin: 0 0 30px 0; font-weight: 500; color: #424242;">Acessar Sistema</h5>
                
                <form id="loginForm">
                  <div class="input-field" style="margin-bottom: 25px;">
                    <i class="material-icons prefix blue-text">email</i>
                    <input id="login_email" type="email" class="validate" required autocomplete="username" style="font-size: 16px;">
                    <label for="login_email" style="font-size: 15px;">Email</label>
                    <span class="helper-text" data-error="Email inválido"></span>
                  </div>
                  
                  <div class="input-field" style="margin-bottom: 30px;">
                    <i class="material-icons prefix blue-text">lock</i>
                    <input id="login_senha" type="password" class="validate" required autocomplete="current-password" style="font-size: 16px;">
                    <label for="login_senha" style="font-size: 15px;">Senha</label>
                  </div>
                  
                  <div style="margin-top: 35px;">
                    <button class="btn waves-effect waves-light blue" type="submit" style="width: 100%; height: 52px; font-size: 16px; border-radius: 8px; box-shadow: 0 4px 12px rgba(25, 118, 210, 0.3);">
                      <span style="line-height: 52px;">Entrar no Sistema</span>
                      <i class="material-icons right" style="line-height: 52px;">arrow_forward</i>
                    </button>
                  </div>
                  
                  <div class="center-align" style="margin-top: 25px;">
                    <a href="#!" onclick="mostrarRecuperarSenha()" class="blue-text" style="font-size: 15px;">
                      <i class="material-icons tiny" style="vertical-align: middle;">help_outline</i>
                      Esqueci minha senha
                    </a>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Card de informações de teste (remover em produção) -->
        <div class="card" style="margin-top: 30px; border-radius: 12px; border-left: 4px solid #2196f3; max-width: 1200px; margin-left: auto; margin-right: auto;">
          <div class="card-content" style="padding: 30px 40px;">
            <span class="card-title blue-text" style="font-size: 18px; display: flex; align-items: center; margin-bottom: 20px;">
              <i class="material-icons" style="margin-right: 10px;">info</i>
              Credenciais de Teste
            </span>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; font-size: 15px;">
              <p style="margin: 5px 0; padding: 12px; background: #f5f5f5; border-radius: 8px;"><strong>Admin Sorria:</strong><br>admin@sorria.com.br / Admin@2025</p>
              <p style="margin: 5px 0; padding: 12px; background: #f5f5f5; border-radius: 8px;"><strong>Gerente:</strong><br>gerente@sorria.com.br / Gerente@2025</p>
              <p style="margin: 5px 0; padding: 12px; background: #f5f5f5; border-radius: 8px;"><strong>Atendente:</strong><br>atendente@sorria.com.br / Atendente@2025</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ========================================
      MODAL DE RECUPERAR SENHA
      ======================================== -->
  <div id="recuperarSenhaModal" class="modal">
    <div class="modal-content">
      <h4>Recuperar Senha</h4>
      <p>Digite seu email para receber instruções de recuperação de senha.</p>
      
      <form id="recuperarSenhaForm">
        <div class="input-field">
          <i class="material-icons prefix">email</i>
          <input id="recuperar_email" type="email" class="validate" required>
          <label for="recuperar_email">Email</label>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-blue btn-flat">Cancelar</a>
      <a href="#!" class="waves-effect waves-blue btn blue" onclick="enviarRecuperacaoSenha()">Enviar</a>
    </div>
  </div>


    <div class="container">
      <!-- Dashboard Section -->
      <div id="dashboardSection" class="section">
        <h4 class="section-title">Dashboard</h4>
        <div class="row">
          <div class="col s12 m6 l3">
            <div class="card stat-card">
              <div class="stat-number" id="totalClientes">0</div>
              <div class="stat-label">Total de Clientes</div>
            </div>
          </div>
          <div class="col s12 m6 l3">
            <div class="card stat-card">
              <div class="stat-number" id="clientesAtivos">0</div>
              <div class="stat-label">Clientes Ativos</div>
            </div>
          </div>
          <div class="col s12 m6 l3">
            <div class="card stat-card">
              <div class="stat-number" id="clientesVencimento">0</div>
              <div class="stat-label">Vencimentos Próximos</div>
            </div>
          </div>
          <div class="col s12 m6 l3">
            <div class="card stat-card">
              <div class="stat-number" id="clientesPendencia">0</div>
              <div class="stat-label">Pendências Fiscais</div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s12 m6">
            <div class="card">
              <div class="card-content">
                <span class="card-title">Clientes por Empresa</span>
                <div id="clientesPorEmpresa"></div>
              </div>
            </div>
          </div>
          <div class="col s12 m6">
            <div class="card">
              <div class="card-content">
                <span class="card-title">Clientes por Tributação</span>
                <div id="clientesPorTributacao"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Clientes Section -->
      <div id="clientesSection" class="section hidden">
        <div class="row" style="margin-bottom: 20px; align-items: center;">
          <div class="col s12 m6">
            <h4 class="section-title" style="margin: 0;">Clientes</h4>
          </div>
          <div class="col s12 m6 right-align">
            <a class="btn waves-effect waves-light blue" onclick="openNovoClienteModal()">
              <i class="material-icons left">add</i>Novo Cliente
            </a>
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <div class="card">
              <div class="card-content">
                <div class="row" style="margin-bottom: 10px;">
                  <div class="col s12 m6 l5">
                    <div class="input-field" style="margin-top: 0;">
                      <i class="material-icons prefix">search</i>
                      <input id="searchCliente" type="text" onkeyup="filterClientesDebounced()">
                      <label for="searchCliente">Buscar por Razão Social ou CPF/CNPJ</label>
                    </div>
                  </div>
                  <div class="col s12 m6 l7 right-align" style="padding-top: 10px;">
                    <a class="btn-flat waves-effect waves-light" onclick="toggleFiltros()" style="margin-right: 10px;">
                      <i class="material-icons left">filter_list</i>Filtros
                    </a>
                    <a class="dropdown-trigger btn-flat waves-effect waves-light green-text" href="#!" data-target="dropdownExportar">
                      <i class="material-icons left">file_download</i>Exportar<i class="material-icons right">arrow_drop_down</i>
                    </a>
                    <ul id="dropdownExportar" class="dropdown-content">
                      <li><a href="#!" onclick="exportarCSV()"><i class="material-icons left">description</i>CSV</a></li>
                      <li><a href="#!" onclick="exportarExcel()"><i class="material-icons left">table_chart</i>Excel</a></li>
                    </ul>
                  </div>
                </div>
                
                <!-- Painel de Filtros Avançados -->
                <div id="filtrosAvancados" class="row" style="display: none; background: #f5f5f5; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
                  <div class="col s12 m4">
                    <div class="input-field">
                      <select id="filtroEmpresa" onchange="aplicarFiltros()">
                        <option value="">Todas</option>
                        <option value="Sorria">Sorria</option>
                        <option value="Medic">Medic</option>
                        <option value="Felício">Felício</option>
                      </select>
                      <label>Empresa</label>
                    </div>
                  </div>
                  <div class="col s12 m4">
                    <div class="input-field">
                      <select id="filtroSituacao" onchange="aplicarFiltros()">
                        <option value="">Todas</option>
                        <option value="Ativo">Ativo</option>
                        <option value="Inativo">Inativo</option>
                        <option value="Baixada">Baixada</option>
                      </select>
                      <label>Situação</label>
                    </div>
                  </div>
                  <div class="col s12 m4">
                    <div class="input-field">
                      <select id="filtroTributacao" onchange="aplicarFiltros()">
                        <option value="">Todos</option>
                        <option value="Simples Nacional">Simples Nacional</option>
                        <option value="Lucro Presumido">Lucro Presumido</option>
                        <option value="Lucro Real">Lucro Real</option>
                        <option value="MEI">MEI</option>
                      </select>
                      <label>Regime de Tributação</label>
                    </div>
                  </div>
                  <div class="col s12 m4">
                    <div class="input-field">
                      <select id="filtroUF" onchange="aplicarFiltros()">
                        <option value="">Todos</option>
                        <option value="AC">AC</option>
                        <option value="AL">AL</option>
                        <option value="AP">AP</option>
                        <option value="AM">AM</option>
                        <option value="BA">BA</option>
                        <option value="CE">CE</option>
                        <option value="DF">DF</option>
                        <option value="ES">ES</option>
                        <option value="GO">GO</option>
                        <option value="MA">MA</option>
                        <option value="MT">MT</option>
                        <option value="MS">MS</option>
                        <option value="MG">MG</option>
                        <option value="PA">PA</option>
                        <option value="PB">PB</option>
                        <option value="PR">PR</option>
                        <option value="PE">PE</option>
                        <option value="PI">PI</option>
                        <option value="RJ">RJ</option>
                        <option value="RN">RN</option>
                        <option value="RS">RS</option>
                        <option value="RO">RO</option>
                        <option value="RR">RR</option>
                        <option value="SC">SC</option>
                        <option value="SP">SP</option>
                        <option value="SE">SE</option>
                        <option value="TO">TO</option>
                      </select>
                      <label>UF</label>
                    </div>
                  </div>
                  <div class="col s12 right-align">
                    <a class="btn-flat waves-effect" onclick="limparFiltros()">Limpar Filtros</a>
                  </div>
                </div>
                <table class="striped highlight responsive-table" id="clientesTable">
                  <thead>
                    <tr>
                      <th style="cursor: pointer;" onclick="ordenarPor('id_cliente')">
                        Código <i class="material-icons tiny" style="vertical-align: middle;">unfold_more</i>
                      </th>
                      <th style="cursor: pointer;" onclick="ordenarPor('razao_social')">
                        Razão Social <i class="material-icons tiny" style="vertical-align: middle;">unfold_more</i>
                      </th>
                      <th style="cursor: pointer;" onclick="ordenarPor('cpf_cnpj')">
                        CPF/CNPJ <i class="material-icons tiny" style="vertical-align: middle;">unfold_more</i>
                      </th>
                      <th style="cursor: pointer;" onclick="ordenarPor('uf')">
                        UF <i class="material-icons tiny" style="vertical-align: middle;">unfold_more</i>
                      </th>
                      <th style="cursor: pointer;" onclick="ordenarPor('situacao')">
                        Situação <i class="material-icons tiny" style="vertical-align: middle;">unfold_more</i>
                      </th>
                      <th style="cursor: pointer;" onclick="ordenarPor('empresa_responsavel')">
                        Empresa <i class="material-icons tiny" style="vertical-align: middle;">unfold_more</i>
                      </th>
                      <th style="cursor: pointer;" onclick="ordenarPor('regime_tributacao')">
                        Regime de Tributação <i class="material-icons tiny" style="vertical-align: middle;">unfold_more</i>
                      </th>
                      <th>Ações</th>
                    </tr>
                  </thead>
                  <tbody id="clientesTableBody">
                    <tr><td colspan="8" class="center-align">Carregando...</td></tr>
                  </tbody>
                </table>
                
                <!-- Paginação -->
                <div class="row" style="margin-top: 20px;">
                  <div class="col s12 center-align">
                    <ul class="pagination" id="paginacao"></ul>
                    <p style="margin-top: 10px; color: #757575;">
                      <span id="infoPaginacao"></span>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Usuários Section -->
      <div id="usuariosSection" class="section hidden">
        <div class="row" style="margin-bottom: 20px; align-items: center;">
          <div class="col s12 m6">
            <h4 class="section-title" style="margin: 0;">Usuários</h4>
          </div>
          <div class="col s12 m6 right-align">
            <a class="btn waves-effect waves-light blue" onclick="openNovoUsuarioModal()">
              <i class="material-icons left">add</i>Novo Usuário
            </a>
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <div class="card">
              <div class="card-content">
                <div class="row" style="margin-bottom: 20px;">
                  <div class="col s12 m6">
                    <div class="input-field" style="margin-top: 0;">
                      <i class="material-icons prefix">search</i>
                      <input id="searchUsuario" type="text" onkeyup="filterUsuarios()">
                      <label for="searchUsuario">Buscar por Email ou Nome</label>
                    </div>
                  </div>
                </div>
                <table class="striped highlight responsive-table" id="usuariosTable">
                  <thead>
                    <tr>
                      <th>Email</th>
                      <th>Nome</th>
                      <th>Empresa</th>
                      <th>Papel</th>
                      <th>Ativo</th>
                      <th>Ações</th>
                    </tr>
                  </thead>
                  <tbody id="usuariosTableBody">
                    <tr><td colspan="6" class="center-align">Carregando...</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Auditoria Section -->
      <div id="auditoriaSection" class="section hidden">
        <div class="row" style="margin-bottom: 20px; align-items: center;">
          <div class="col s12">
            <h4 class="section-title" style="margin: 0;">Auditoria</h4>
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <div class="card">
              <div class="card-content">
                <!-- Filtros -->
                <div class="row" style="margin-bottom: 10px;">
                  <div class="col s12">
                    <a class="btn-flat waves-effect waves-light" onclick="toggleFiltrosAuditoria()" style="margin-bottom: 15px;">
                      <i class="material-icons left">filter_list</i>Filtros
                    </a>
                  </div>
                </div>
                
                <!-- Painel de Filtros -->
                <div id="filtrosAuditoria" class="row" style="display: none; background: #f5f5f5; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
                  <div class="col s12 m6 l3">
                    <div class="input-field">
                      <input id="filtroAuditoriaDataInicio" type="date">
                      <label for="filtroAuditoriaDataInicio" class="active">Data Início</label>
                    </div>
                  </div>
                  <div class="col s12 m6 l3">
                    <div class="input-field">
                      <input id="filtroAuditoriaDataFim" type="date">
                      <label for="filtroAuditoriaDataFim" class="active">Data Fim</label>
                    </div>
                  </div>
                  <div class="col s12 m6 l3">
                    <div class="input-field">
                      <input id="filtroAuditoriaUsuario" type="text" onkeyup="aplicarFiltrosAuditoria()">
                      <label for="filtroAuditoriaUsuario">Usuário (Email)</label>
                    </div>
                  </div>
                  <div class="col s12 m6 l3">
                    <div class="input-field">
                      <select id="filtroAuditoriaAcao" onchange="aplicarFiltrosAuditoria()">
                        <option value="">Todas as Ações</option>
                        <option value="CLIENTE_CRIADO">Cliente Criado</option>
                        <option value="CLIENTE_ATUALIZADO">Cliente Atualizado</option>
                        <option value="CLIENTE_DELETADO">Cliente Deletado</option>
                        <option value="USUARIO_CRIADO">Usuário Criado</option>
                        <option value="USUARIO_ATUALIZADO">Usuário Atualizado</option>
                        <option value="USUARIO_DELETADO">Usuário Deletado</option>
                        <option value="COMENTARIO_ADICIONADO">Comentário Adicionado</option>
                        <option value="COMENTARIO_DELETADO">Comentário Deletado</option>
                        <option value="PARCELAMENTO_CRIADO">Parcelamento Criado</option>
                        <option value="PARCELAMENTO_ATUALIZADO">Parcelamento Atualizado</option>
                        <option value="PARCELAMENTO_DELETADO">Parcelamento Deletado</option>
                        <option value="EXPORTAR_CSV">Exportar CSV</option>
                        <option value="EXPORTAR_EXCEL">Exportar Excel</option>
                      </select>
                      <label>Ação</label>
                    </div>
                  </div>
                  <div class="col s12 m6 l3">
                    <div class="input-field">
                      <input id="filtroAuditoriaCliente" type="number" onkeyup="aplicarFiltrosAuditoria()">
                      <label for="filtroAuditoriaCliente">ID Cliente</label>
                    </div>
                  </div>
                  <div class="col s12 right-align">
                    <a class="btn-flat waves-effect" onclick="limparFiltrosAuditoria()">Limpar Filtros</a>
                    <a class="btn blue waves-effect waves-light" onclick="aplicarFiltrosAuditoria()">
                      <i class="material-icons left">search</i>Aplicar Filtros
                    </a>
                  </div>
                </div>

                <table class="striped highlight responsive-table" id="auditoriaTable">
                  <thead>
                    <tr>
                      <th style="cursor: pointer;" onclick="ordenarAuditoria('timestamp')">
                        Data/Hora <i class="material-icons tiny" style="vertical-align: middle;">unfold_more</i>
                      </th>
                      <th style="cursor: pointer;" onclick="ordenarAuditoria('email_usuario')">
                        Usuário <i class="material-icons tiny" style="vertical-align: middle;">unfold_more</i>
                      </th>
                      <th style="cursor: pointer;" onclick="ordenarAuditoria('acao')">
                        Ação <i class="material-icons tiny" style="vertical-align: middle;">unfold_more</i>
                      </th>
                      <th style="cursor: pointer;" onclick="ordenarAuditoria('id_cliente_afetado')">
                        ID Cliente <i class="material-icons tiny" style="vertical-align: middle;">unfold_more</i>
                      </th>
                      <th>Detalhes</th>
                    </tr>
                  </thead>
                  <tbody id="auditoriaTableBody">
                    <tr><td colspan="5" class="center-align">Carregando...</td></tr>
                  </tbody>
                </table>
                
                <!-- Info de registros -->
                <div class="row" style="margin-top: 20px;">
                  <div class="col s12 center-align">
                    <p style="color: #757575;">
                      <span id="infoAuditoria">Carregando registros...</span>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="page-footer blue darken-2">
    <div class="container">
      <div class="row">
        <div class="col s12 center-align">
          <p class="white-text">© 2025 Gestão de Clientes - Sorria/Medic | Versão Beta</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Modal: Novo/Editar Cliente -->
  <div id="clienteModal" class="modal modal-fixed-footer">
    <div class="modal-content">
      <div class="form-header">
        <h4 id="clienteModalTitle">Novo Cliente</h4>
        <p style="margin: 5px 0 0 0; opacity: 0.9; font-size: 14px;">Preencha os dados do cliente</p>
      </div>
      
      <form id="clienteForm">
        
        <!-- Informações Básicas -->
        <div class="form-section">
          <h6>
            <i class="material-icons">business</i>
            Informações Básicas
          </h6>
          
          <div class="row">
            <div class="input-field col s12 m6">
              <input id="razao_social" type="text" required>
              <label for="razao_social">Razão Social *</label>
            </div>
            <div class="input-field col s12 m6">
              <input id="cpf_cnpj" type="text" required maxlength="18" onblur="validarCampoCpfCnpj(this)">
              <label for="cpf_cnpj">CPF/CNPJ *</label>
              <span id="cpf_cnpj_error" style="color: #f44336; font-size: 12px; display: none;"></span>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12 m6">
              <select id="empresa_responsavel" required>
                <option value="" disabled selected>Escolha uma empresa</option>
                <option value="Sorria">Sorria</option>
                <option value="Medic">Medic</option>
                <option value="Felício">Felício</option>
              </select>
              <label>Empresa Responsável *</label>
            </div>
            <div class="input-field col s12 m6">
              <input id="squad" type="text" required>
              <label for="squad">Squad *</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12 m8">
              <input id="municipio" type="text" required>
              <label for="municipio">Município *</label>
            </div>
            <div class="input-field col s12 m4">
              <select id="uf" required>
                <option value="" disabled selected>UF</option>
                <option value="AC">AC</option>
                <option value="AL">AL</option>
                <option value="AP">AP</option>
                <option value="AM">AM</option>
                <option value="BA">BA</option>
                <option value="CE">CE</option>
                <option value="DF">DF</option>
                <option value="ES">ES</option>
                <option value="GO">GO</option>
                <option value="MA">MA</option>
                <option value="MT">MT</option>
                <option value="MS">MS</option>
                <option value="MG">MG</option>
                <option value="PA">PA</option>
                <option value="PB">PB</option>
                <option value="PR">PR</option>
                <option value="PE">PE</option>
                <option value="PI">PI</option>
                <option value="RJ">RJ</option>
                <option value="RN">RN</option>
                <option value="RS">RS</option>
                <option value="RO">RO</option>
                <option value="RR">RR</option>
                <option value="SC">SC</option>
                <option value="SP">SP</option>
                <option value="SE">SE</option>
                <option value="TO">TO</option>
              </select>
              <label>UF *</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12 m6">
              <select id="situacao" required>
                <option value="" disabled selected>Escolha a situação</option>
                <option value="Ativo">Ativo</option>
                <option value="Inativo">Inativo</option>
                <option value="Baixada">Baixada</option>
              </select>
              <label>Situação *</label>
            </div>
            <div class="input-field col s12 m6">
              <input id="faturamento" type="number" step="0.01" min="0">
              <label for="faturamento">Faturamento (R$)</label>
            </div>
          </div>
        </div>

        <!-- Informações Fiscais -->
        <div class="form-section">
          <h6>
            <i class="material-icons">account_balance</i>
            Informações Fiscais
          </h6>

          <div class="row">
            <div class="input-field col s12 m6">
              <select id="regime_tributacao">
                <option value="" disabled selected>Escolha o regime</option>
                <option value="Simples Nacional">Simples Nacional</option>
                <option value="Lucro Presumido">Lucro Presumido</option>
                <option value="Lucro Real">Lucro Real</option>
                <option value="MEI">MEI</option>
              </select>
              <label>Regime de Tributação</label>
            </div>
            <div class="input-field col s12 m6">
              <select id="status_parcelamento">
                <option value="" disabled selected>Escolha</option>
                <option value="SIM">SIM</option>
                <option value="NÃO">NÃO</option>
              </select>
              <label>Status Parcelamento</label>
            </div>
          </div>
        </div>

        <!-- Datas Importantes -->
        <div class="form-section">
          <h6>
            <i class="material-icons">event</i>
            Datas Importantes
          </h6>

          <div class="row">
            <div class="input-field col s12 m4">
              <input id="data_entrada" type="date">
              <label for="data_entrada" class="active">Data de Entrada</label>
            </div>
            <div class="input-field col s12 m4">
              <input id="data_constituicao" type="date">
              <label for="data_constituicao" class="active">Data de Constituição</label>
            </div>
            <div class="input-field col s12 m4">
              <input id="ultima_consulta_fiscal" type="date">
              <label for="ultima_consulta_fiscal" class="active">Última Consulta Fiscal</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12 m4">
              <input id="vencimento_iss" type="date">
              <label for="vencimento_iss" class="active">Vencimento ISS</label>
            </div>
            <div class="input-field col s12 m4">
              <input id="prazo_efd_reinf" type="date">
              <label for="prazo_efd_reinf" class="active">Prazo EFD-Reinf</label>
            </div>
            <div class="input-field col s12 m4">
              <input id="prazo_fechamento" type="date">
              <label for="prazo_fechamento" class="active">Prazo Fechamento</label>
            </div>
          </div>
        </div>

        <!-- Status de Regularidade -->
        <div class="form-section">
          <h6>
            <i class="material-icons">verified_user</i>
            Status de Regularidade
          </h6>

          <div class="row">
            <div class="input-field col s12 m6">
              <select id="status_regularidade_federal">
                <option value="" disabled selected>Escolha</option>
                <option value="OK">OK</option>
                <option value="PENDENTE">PENDENTE</option>
                <option value="IRREGULAR">IRREGULAR</option>
              </select>
              <label>Regularidade Federal</label>
            </div>
            <div class="input-field col s12 m6">
              <select id="status_regularidade_municipal">
                <option value="" disabled selected>Escolha</option>
                <option value="OK">OK</option>
                <option value="PENDENTE">PENDENTE</option>
                <option value="IRREGULAR">IRREGULAR</option>
              </select>
              <label>Regularidade Municipal</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12 m6">
              <select id="status_regularidade_estadual">
                <option value="" disabled selected>Escolha</option>
                <option value="OK">OK</option>
                <option value="PENDENTE">PENDENTE</option>
                <option value="IRREGULAR">IRREGULAR</option>
              </select>
              <label>Regularidade Estadual</label>
            </div>
            <div class="input-field col s12 m6">
              <select id="status_regularidade_conselho">
                <option value="" disabled selected>Escolha</option>
                <option value="OK">OK</option>
                <option value="PENDENTE">PENDENTE</option>
                <option value="IRREGULAR">IRREGULAR</option>
              </select>
              <label>Regularidade Conselho</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12">
              <textarea id="observacoes_regularidade" class="materialize-textarea"></textarea>
              <label for="observacoes_regularidade">Observações de Regularidade</label>
            </div>
          </div>
        </div>

        
        <input type="hidden" id="cliente_id">
      </form>
    </div>
    <div class="modal-footer" style="padding: 20px 30px; background: #f5f5f5;">
      <a href="#!" class="modal-close waves-effect waves-red btn-flat" style="margin-right: 10px;">
        <i class="material-icons left">close</i>Cancelar
      </a>
      <a href="#!" class="waves-effect waves-green btn blue" onclick="salvarCliente()">
        <i class="material-icons left">save</i>Salvar Cliente
      </a>
    </div>
  </div>

  <!-- Modal: Visualizar Cliente -->
  <div id="viewClienteModal" class="modal modal-fixed-footer">
    <div class="modal-content">
      <div id="clienteDetalhes"></div>
    </div>
    <div class="modal-footer">
      <a href="#!" class="waves-effect waves-green btn blue" onclick="verHistoricoCliente()" style="margin-right: 10px;">
        <i class="material-icons left">history</i>Histórico
      </a>
      <a href="#!" class="waves-effect waves-green btn green" onclick="editarClienteDoModal()" style="margin-right: 10px;">
        <i class="material-icons left">edit</i>Editar
      </a>
      <a href="#!" class="waves-effect waves-red btn red" onclick="deletarClienteDoModal()" style="margin-right: 10px;">
        <i class="material-icons left">delete</i>Excluir
      </a>
      <a href="#!" class="modal-close waves-effect waves-grey btn-flat">Fechar</a>
    </div>
  </div>

  <!-- Modal: Histórico de Alterações -->
  <div id="historicoModal" class="modal">
    <div class="modal-content">
      <h4 style="color: #1976d2; margin-bottom: 20px;">
        <i class="material-icons" style="vertical-align: middle;">history</i>
        Histórico de Alterações
      </h4>
      <div id="historicoContent">
        <div class="center-align" style="padding: 40px;">
          <div class="preloader-wrapper active">
            <div class="spinner-layer spinner-blue-only">
              <div class="circle-clipper left">
                <div class="circle"></div>
              </div>
              <div class="gap-patch">
                <div class="circle"></div>
              </div>
              <div class="circle-clipper right">
                <div class="circle"></div>
              </div>
            </div>
          </div>
          <p style="margin-top: 20px; color: #757575;">Carregando histórico...</p>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-grey btn-flat">Fechar</a>
    </div>
  </div>

  <!-- Modal: Novo/Editar Parcelamento -->
  <div id="parcelamentoModal" class="modal modal-fixed-footer">
    <div class="modal-content">
      <div class="form-header">
        <h4 id="parcelamentoModalTitle">Novo Parcelamento</h4>
        <p style="margin: 5px 0 0 0; opacity: 0.9; font-size: 14px;">Preencha os dados do parcelamento fiscal</p>
      </div>
      
      <form id="parcelamentoForm">
        <!-- Informações do Parcelamento -->
        <div class="form-section">
          <h6>
            <i class="material-icons">payment</i>
            Informações do Parcelamento
          </h6>
          
          <div class="row">
            <div class="input-field col s12 m6">
              <input id="parcelamento_tipo" type="text" required>
              <label for="parcelamento_tipo">Tipo de Parcelamento *</label>
              <span class="helper-text">Ex: Simples Nacional, Dívida Ativa PGFN, INSS, etc.</span>
            </div>
            <div class="input-field col s12 m6">
              <input id="parcelamento_status_parcela" type="text" placeholder="Ex: 32/60">
              <label for="parcelamento_status_parcela">Status da Parcela</label>
              <span class="helper-text">Ex: 12/60 (parcela 12 de 60)</span>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12 m6">
              <input id="parcelamento_data_envio" type="date">
              <label for="parcelamento_data_envio" class="active">Data de Envio da Guia</label>
            </div>
            <div class="input-field col s12 m6">
              <select id="parcelamento_modo_pagamento" required>
                <option value="" disabled>Escolha o modo</option>
                <option value="Boleto" selected>Boleto</option>
                <option value="Débito Automático">Débito Automático</option>
                <option value="PIX">PIX</option>
                <option value="Transferência">Transferência</option>
                <option value="Outro">Outro</option>
            </select>
            <label>Modo de Pagamento *</label>
          </div>
        </div>

        <div class="row">
          <div class="input-field col s12">
            <textarea id="parcelamento_observacoes" class="materialize-textarea"></textarea>
            <label for="parcelamento_observacoes">Observações</label>
          </div>
        </div>
      </div>

      <input type="hidden" id="parcelamento_id">
      <input type="hidden" id="parcelamento_id_cliente">
    </form>
  </div>
  <div class="modal-footer" style="padding: 20px 30px; background: #f5f5f5;">
    <a href="#!" class="modal-close waves-effect waves-red btn-flat" style="margin-right: 10px;">
      <i class="material-icons left">close</i>Cancelar
    </a>
    <a href="#!" class="waves-effect waves-green btn blue" onclick="salvarParcelamento()">
      <i class="material-icons left">save</i>Salvar Parcelamento
    </a>
  </div>
</div>

<!-- Modal: Novo/Editar Usuário -->
<div id="usuarioModal" class="modal modal-fixed-footer">
  <div class="modal-content">
    <div class="form-header">
      <h4 id="usuarioModalTitle">Novo Usuário</h4>
      <p style="margin: 5px 0 0 0; opacity: 0.9; font-size: 14px;">Preencha os dados do usuário</p>
    </div>
    
    <form id="usuarioForm">
      <div class="form-section">
        <h6>
          <i class="material-icons">person</i>
          Informações Básicas
        </h6>
        
        <div class="row">
          <div class="input-field col s12 m6">
            <input id="usuario_email" type="email" required>
            <label for="usuario_email">Email *</label>
            <span class="helper-text">O email será usado para login</span>
          </div>
          <div class="input-field col s12 m6">
            <input id="usuario_nome" type="text" required>
            <label for="usuario_nome">Nome Completo *</label>
          </div>
        </div>

        <div class="row">
          <div class="input-field col s12 m6">
            <select id="usuario_empresa" required>
              <option value="" disabled selected>Escolha uma empresa</option>
              <option value="Sorria">Sorria</option>
              <option value="Medic">Medic</option>
              <option value="Felício">Felício</option>
              <option value="Todas">Todas</option>
            </select>
            <label>Empresa *</label>
          </div>
          <div class="input-field col s12 m6">
            <select id="usuario_papel" required>
              <option value="" disabled selected>Escolha um papel</option>
              <option value="Administrador">Administrador</option>
              <option value="Gerente">Gerente</option>
              <option value="Operador">Operador</option>
              <option value="Visualizador">Visualizador</option>
            </select>
            <label>Papel/Permissão *</label>
          </div>
        </div>

        <div class="row">
          <div class="input-field col s12 m6">
            <select id="usuario_status" required>
              <option value="" disabled>Escolha o status</option>
              <option value="true" selected>Ativo</option>
              <option value="false">Inativo</option>
            </select>
            <label>Status *</label>
            <span class="helper-text">Usuários inativos não podem acessar o sistema</span>
          </div>
        </div>
      </div>

      <div class="row" id="senhaSection" style="display: none;">
        <div class="col s12">
          <button type="button" class="btn-flat blue-text waves-effect waves-light" onclick="abrirModalTrocarSenha()" id="btnTrocarSenha">
            <i class="material-icons left">lock</i>Alterar Senha
          </button>
        </div>
      </div>

      <input type="hidden" id="usuario_email_original">
      <input type="hidden" id="usuario_modo_edicao" value="false">
    </form>
  </div>
  <div class="modal-footer" style="padding: 20px 30px; background: #f5f5f5;">
    <a href="#!" class="modal-close waves-effect waves-red btn-flat" style="margin-right: 10px;">
      <i class="material-icons left">close</i>Cancelar
    </a>
    <a href="#!" class="waves-effect waves-green btn blue" onclick="salvarUsuario()">
      <i class="material-icons left">save</i>Salvar Usuário
    </a>
  </div>
</div>

<!-- Modal: Trocar Senha do Usuário -->
<div id="trocarSenhaModal" class="modal">
  <div class="modal-content">
    <h4 style="color: #1976d2; margin-bottom: 20px;">
      <i class="material-icons" style="vertical-align: middle;">lock</i>
      Trocar Senha
    </h4>
    
    <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
      <p style="margin: 0; color: #1976d2;">
        <strong>Usuário:</strong> <span id="trocarSenhaUsuarioEmail"></span>
      </p>
    </div>

    <form id="trocarSenhaForm">
      <div class="row">
        <div class="input-field col s12">
          <input id="trocar_senha_nova" type="password" minlength="6" required autocomplete="new-password">
          <label for="trocar_senha_nova">Nova Senha *</label>
          <span class="helper-text">Mínimo de 6 caracteres</span>
        </div>
      </div>

      <div class="row">
        <div class="input-field col s12">
          <input id="trocar_senha_confirmar" type="password" minlength="6" required autocomplete="new-password">
          <label for="trocar_senha_confirmar">Confirmar Nova Senha *</label>
        </div>
      </div>

      <input type="email" id="trocar_senha_email_usuario" name="email" style="display:none;" autocomplete="username">
    </form>
  </div>
  <div class="modal-footer">
    <a href="#!" class="modal-close waves-effect waves-grey btn-flat" style="margin-right: 10px;">
      Cancelar
    </a>
    <a href="#!" class="waves-effect waves-green btn blue" onclick="salvarNovaSenha()">
      <i class="material-icons left">save</i>Alterar Senha
    </a>
  </div>
</div>

<!-- ===========================================
MODAL DE GESTÃO DE ACESSOS
============================================ -->
<div id="acessosModal" class="modal modal-fixed-footer" style="max-height: 90%; width: 80%; max-width: 1200px;">
  <div class="modal-content">
    <h4 id="acessosClienteNome">Acessos do Cliente</h4>
    <input type="hidden" id="acessos_id_cliente">

    <!-- Container da Lista de Acessos -->
    <div id="listaAcessosContainer">
      <div class="right-align" style="margin-bottom: 10px;">
        <button onclick="novoAcesso()" class="btn-large waves-effect waves-light green">
          <i class="material-icons left">add</i>Novo Acesso
        </button>
      </div>
      <div id="listaAcessos">
        <!-- A lista de acessos será renderizada aqui -->
        <div class="center-align grey-text" style="padding: 40px 20px;">
          <div class="preloader-wrapper big active">
            <div class="spinner-layer spinner-blue-only">
              <div class="circle-clipper left">
                <div class="circle"></div>
              </div><div class="gap-patch">
                <div class="circle"></div>
              </div><div class="circle-clipper right">
                <div class="circle"></div>
              </div>
            </div>
          </div>
          <p>Carregando acessos...</p>
        </div>
      </div>
    </div>

    <!-- Container do Formulário de Acesso -->
    <div id="acessoFormContainer" style="display: none;">
      <h5 id="acessoFormTitle">Novo Acesso</h5>
      <form id="acessoForm">
        <input type="hidden" id="acesso_id_acesso">
        <div class="row">
          <div class="input-field col s12 m6">
            <i class="material-icons prefix">label</i>
            <input id="acesso_servico" type="text" class="validate" required>
            <label for="acesso_servico">Serviço *</label>
            <span class="helper-text">Ex: Prefeitura de Santos (GISS), E-CAC, Cliniconect</span>
          </div>
          <div class="input-field col s12 m6">
            <i class="material-icons prefix">category</i>
            <input id="acesso_categoria" type="text">
            <label for="acesso_categoria">Categoria</label>
            <span class="helper-text">Ex: Fiscal, Contábil, Departamento Pessoal, Gestão</span>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <i class="material-icons prefix">link</i>
            <input id="acesso_link" type="url">
            <label for="acesso_link">Link de Acesso</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12 m6">
            <i class="material-icons prefix">person</i>
            <input id="acesso_login" type="text">
            <label for="acesso_login">Login</label>
          </div>
          <div class="input-field col s12 m6">
            <i class="material-icons prefix">password</i>
            <input id="acesso_senha" type="password" required>
            <label for="acesso_senha">Senha *</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <i class="material-icons prefix">notes</i>
            <textarea id="acesso_observacoes" class="materialize-textarea"></textarea>
            <label for="acesso_observacoes">Observações</label>
          </div>
        </div>
      </form>
      <div class="right-align">
        <button onclick="cancelarAcesso()" class="btn-flat waves-effect">Cancelar</button>
        <button onclick="salvarAcesso()" class="btn waves-effect waves-light blue">Salvar Acesso</button>
      </div>
    </div>

  </div>
  <div class="modal-footer">
    <a href="#!" class="modal-close waves-effect waves-green btn-flat">Fechar</a>
  </div>
</div>
    
    

<!-- Materialize JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js" defer></script>

<!-- Supabase JS -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>

<!-- Configuração Supabase -->
<script src="supabase-config.js" defer></script>

<!-- Lógica da Aplicação -->
<script src="app.js" defer></script>
</body>
</html>